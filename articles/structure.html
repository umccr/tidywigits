<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Structure • tidywigits</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Structure">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tidywigits</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1.9014</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html">Intro</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/structure.html">Structure</a></li>
    <li><a class="dropdown-item" href="../articles/developers.html">Developers</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/NEWS.html">NEWS</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/umccr/tidywigits/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Structure</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/umccr/tidywigits/blob/feat/9-gha/vignettes/structure.Rmd" class="external-link"><code>vignettes/structure.Rmd</code></a></small>
      <div class="d-none name"><code>structure.Rmd</code></div>
    </div>

    
    
<style type="text/css">
/*
https://github.com/r-lib/pkgdown/issues/2721
Correct flex boxes from sizing based upon the largest in tabset
*/

.tab-content>.tab-pane {
  display: none;
}

.tab-content>.active {
  display: block;
}
</style>
<p>{tidywigits} is an R package that parses and tidies outputs from the
<a href="https://github.com/hartwigmedical/hmftools" title="WiGiTS suite" class="external-link">WiGiTS</a> suite of genome and transcriptome
analysis tools for cancer research and diagnostics, created by the
Hartwig Medical Foundation.</p>
<p>In short, it traverses through a directory containing results from
one or more runs of WiGiTS tools, parses any files it recognises, tidies
them up (which includes data reshaping, normalisation, column name
cleanup etc.), and writes them to the output format of choice
e.g. Apache Parquet, PostgreSQL, Delta table.</p>
<p>{tidywigits} is built on top of R’s <a href="https://github.com/r-lib/R6" title="R6 package repo" class="external-link">R6</a>
encapsulated object-oriented programming implementation, which helps
with code organisation. It consists of several base classes like
<code>File</code>, <code>Config</code>, <code>Tool</code>, and
<code>Workflow</code> which we describe below. Each R6 class can contain
public and private functions and non-functions (fields).</p>
<div class="section level2">
<h2 id="file">
<code>File</code><a class="anchor" aria-label="anchor" href="#file"></a>
</h2>
<p>A <code>File</code> object represents… a file. It has an absolute
path, a basename, and a size. Given a suffix pattern, it spits out its
prefix. See <code><a href="../reference/File.html">?File</a></code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/readr_example.html" class="external-link">readr_example</a></span><span class="op">(</span><span class="st">"mtcars.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/readr/extdata/mtcars.csv"</span></span>
<span><span class="op">(</span><span class="va">f1_obj</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/File.html">File</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="va">f1</span>, suffix_pattern <span class="op">=</span> <span class="st">"\\.csv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; #--- File mtcars.csv ---#</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |var            |value                                                    |</span></span>
<span><span class="co">#&gt; |:--------------|:--------------------------------------------------------|</span></span>
<span><span class="co">#&gt; |path           |/home/runner/work/_temp/Library/readr/extdata/mtcars.csv |</span></span>
<span><span class="co">#&gt; |bname          |mtcars.csv                                               |</span></span>
<span><span class="co">#&gt; |suffix_pattern |\.csv                                                    |</span></span>
<span><span class="co">#&gt; |prefix         |mtcars                                                   |</span></span>
<span><span class="co">#&gt; |size           |1.27K                                                    |</span></span></code></pre></div>
<p>You can access the individual fields in the classic R list-like
manner, using the <code>$</code> sign:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f1_obj</span><span class="op">$</span><span class="va">suffix_pattern</span></span>
<span><span class="co">#&gt; [1] "\\.csv"</span></span>
<span><span class="va">f1_obj</span><span class="op">$</span><span class="va">prefix</span></span>
<span><span class="co">#&gt; [1] "mtcars"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="config">
<code>Config</code><a class="anchor" aria-label="anchor" href="#config"></a>
</h2>
<p>A <code>Config</code> object contains functionality for interacting
with YAML configuration files that are part of {tidywigits}. These
configuration files (under <code>inst/config</code>) specify the
schemas, types, patterns and field descriptions for the <em>raw</em>
input <em>files</em> and <em>tidy</em> output <em>tbls</em>. See
<code><a href="../reference/Config.html">?Config</a></code>.</p>
<div class="section level3 tabset tabset-pills">
<h3 class="tabset tabset-pills" id="raw">raw<a class="anchor" aria-label="anchor" href="#raw"></a>
</h3>





<ul class="nav nav-pills" id="raw" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#intro" id="intro-tab" type="button" role="tab" aria-controls="intro" aria-selected="true" class="active nav-link">intro</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#patterns" id="patterns-tab" type="button" role="tab" aria-controls="patterns" aria-selected="false" class="nav-link">patterns</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#descriptions" id="descriptions-tab" type="button" role="tab" aria-controls="descriptions" aria-selected="false" class="nav-link">descriptions</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#versions" id="versions-tab" type="button" role="tab" aria-controls="versions" aria-selected="false" class="nav-link">versions</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#schemas" id="schemas-tab" type="button" role="tab" aria-controls="schemas" aria-selected="false" class="nav-link">schemas</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="intro" role="tabpanel" aria-labelledby="intro-tab">

<p>Let’s look at some of the information for the raw PURPLE config, for
instance:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tool</span> <span class="op">&lt;-</span> <span class="st">"purple"</span></span>
<span><span class="va">toolu</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html" class="external-link">toupper</a></span><span class="op">(</span><span class="va">tool</span><span class="op">)</span></span>
<span><span class="va">conf</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Config.html">Config</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="va">tool</span><span class="op">)</span></span>
<span><span class="va">conf</span></span>
<span><span class="co">#&gt; #--- Config purple ---#</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |var   |value  |</span></span>
<span><span class="co">#&gt; |:-----|:------|</span></span>
<span><span class="co">#&gt; |tool  |purple |</span></span>
<span><span class="co">#&gt; |nraw  |10     |</span></span>
<span><span class="co">#&gt; |ntidy |10     |</span></span></code></pre></div>
</div>
<div class="tab-pane" id="patterns" role="tabpanel" aria-labelledby="patterns-tab">

<p>Patterns are used to fish out the relevant files from a directory
listing. Note that the <code>\</code> needs to be doubled in the R code
since it’s an escaped character.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conf</span><span class="op">$</span><span class="fu">get_raw_patterns</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">glue</span><span class="op">(</span><span class="st">"{toolu} raw file patterns."</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>PURPLE raw file patterns.</caption>
<colgroup>
<col width="19%">
<col width="80%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cnvgenetsv</td>
<td align="left">.purple.cnv.gene.tsv$</td>
</tr>
<tr class="even">
<td align="left">cnvsomtsv</td>
<td align="left">.purple.cnv.somatic.tsv$</td>
</tr>
<tr class="odd">
<td align="left">drivercatalog</td>
<td align="left">.purple.driver.catalog.(germline|somatic).tsv$</td>
</tr>
<tr class="even">
<td align="left">germdeltsv</td>
<td align="left">.purple.germline.deletion.tsv$</td>
</tr>
<tr class="odd">
<td align="left">purityrange</td>
<td align="left">.purple.purity.range.tsv$</td>
</tr>
<tr class="even">
<td align="left">puritytsv</td>
<td align="left">.purple.purity.tsv$</td>
</tr>
<tr class="odd">
<td align="left">qc</td>
<td align="left">.purple.qc$</td>
</tr>
<tr class="even">
<td align="left">somclonality</td>
<td align="left">.purple.somatic.clonality.tsv$</td>
</tr>
<tr class="odd">
<td align="left">somhist</td>
<td align="left">.purple.somatic.hist.tsv$</td>
</tr>
<tr class="even">
<td align="left">version</td>
<td align="left">^purple.version$</td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" id="descriptions" role="tabpanel" aria-labelledby="descriptions-tab">

<p>File descriptions based on the Hartwig documentation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conf</span><span class="op">$</span><span class="fu">get_raw_descriptions</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">glue</span><span class="op">(</span><span class="st">"{toolu} raw file descriptions."</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>PURPLE raw file descriptions.</caption>
<colgroup>
<col width="15%">
<col width="84%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cnvgenetsv</td>
<td align="left">Copy number alterations of each gene in the HMF gene
panel.</td>
</tr>
<tr class="even">
<td align="left">cnvsomtsv</td>
<td align="left">Copy number profile of all (contiguous) segments of the
tumor sample.</td>
</tr>
<tr class="odd">
<td align="left">drivercatalog</td>
<td align="left">Significant amplifications and deletions that occur in
the HMF gene panel.</td>
</tr>
<tr class="even">
<td align="left">germdeltsv</td>
<td align="left">Germline deletions.</td>
</tr>
<tr class="odd">
<td align="left">purityrange</td>
<td align="left">Best fit per purity sorted by score.</td>
</tr>
<tr class="even">
<td align="left">puritytsv</td>
<td align="left">Purity/ploidy fit summary.</td>
</tr>
<tr class="odd">
<td align="left">qc</td>
<td align="left">QC metrics.</td>
</tr>
<tr class="even">
<td align="left">somclonality</td>
<td align="left">Clonality peak model data.</td>
</tr>
<tr class="odd">
<td align="left">somhist</td>
<td align="left">Somatic variant histogram data.</td>
</tr>
<tr class="even">
<td align="left">version</td>
<td align="left">Version of the tool.</td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" id="versions" role="tabpanel" aria-labelledby="versions-tab">

<p>Versions are used to distinguish changes in schema between individual
tool versions. For example, after LINX v1.25, several columns were
dropped from the <code>breakends</code> table, which is reflected in the
available LINX schemas. For now we are using <code>latest</code> as a
default version based on the most recent schema tests, and any
discrepancies we see are labelled accordingly by the version of the tool
that generated a file with a different schema.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conf</span><span class="op">$</span><span class="fu">get_raw_versions</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">glue</span><span class="op">(</span><span class="st">"{toolu} raw file versions."</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>PURPLE raw file versions.</caption>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cnvgenetsv</td>
<td align="left">latest</td>
</tr>
<tr class="even">
<td align="left">cnvsomtsv</td>
<td align="left">latest</td>
</tr>
<tr class="odd">
<td align="left">drivercatalog</td>
<td align="left">latest</td>
</tr>
<tr class="even">
<td align="left">germdeltsv</td>
<td align="left">latest</td>
</tr>
<tr class="odd">
<td align="left">purityrange</td>
<td align="left">latest</td>
</tr>
<tr class="even">
<td align="left">puritytsv</td>
<td align="left">latest</td>
</tr>
<tr class="odd">
<td align="left">qc</td>
<td align="left">latest</td>
</tr>
<tr class="even">
<td align="left">somclonality</td>
<td align="left">latest</td>
</tr>
<tr class="odd">
<td align="left">somhist</td>
<td align="left">latest</td>
</tr>
<tr class="even">
<td align="left">version</td>
<td align="left">latest</td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" id="schemas" role="tabpanel" aria-labelledby="schemas-tab">

<p>The raw schemas specify the column name and type (e.g. character
(<code>c</code>), integer (<code>i</code>), float/double
(<code>d</code>)) for each input file (just showing a couple below):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va">conf</span><span class="op">$</span><span class="fu">get_raw_schemas_all</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 3</span></span></span>
<span><span class="co">#&gt;    name          version schema           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cnvgenetsv    latest  <span style="color: #949494;">&lt;tibble [18 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cnvsomtsv     latest  <span style="color: #949494;">&lt;tibble [16 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> drivercatalog latest  <span style="color: #949494;">&lt;tibble [17 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> germdeltsv    latest  <span style="color: #949494;">&lt;tibble [16 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purityrange   latest  <span style="color: #949494;">&lt;tibble [6 × 2]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> puritytsv     latest  <span style="color: #949494;">&lt;tibble [25 × 2]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> qc            latest  <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> somclonality  latest  <span style="color: #949494;">&lt;tibble [6 × 2]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> somhist       latest  <span style="color: #949494;">&lt;tibble [3 × 2]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> version       latest  <span style="color: #949494;">&lt;tibble [2 × 2]&gt;</span></span></span>
<span><span class="va">s</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">name</span> <span class="op">==</span> <span class="st">"puritytsv"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"schema"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="st">"schema"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 2</span></span></span>
<span><span class="co">#&gt;    field                type </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purity               d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> normFactor           d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> score                d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> diploidProportion    d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ploidy               d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gender               c    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> status               c    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> polyclonalProportion d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> minPurity            d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> maxPurity            d    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level3 tabset tabset-pills">
<h3 class="tabset tabset-pills" id="tidy">tidy<a class="anchor" aria-label="anchor" href="#tidy"></a>
</h3>



<ul class="nav nav-pills" id="tidy" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#intro-1" id="intro-1-tab" type="button" role="tab" aria-controls="intro-1" aria-selected="true" class="active nav-link">intro</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#descriptions-1" id="descriptions-1-tab" type="button" role="tab" aria-controls="descriptions-1" aria-selected="false" class="nav-link">descriptions</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#schemas-1" id="schemas-1-tab" type="button" role="tab" aria-controls="schemas-1" aria-selected="false" class="nav-link">schemas</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="intro-1" role="tabpanel" aria-labelledby="intro-1-tab">

<p>Now let’s look at some of the information in the tidy PURPLE config.
The difference between raw and tidy configs is mostly in the column
names (they are standardised to lowercase separated by underscores,
i.e. snake_case), and some raw files get split into multiple tidy tables
(e.g. for normalisation purposes).</p>
</div>
<div class="tab-pane" id="descriptions-1" role="tabpanel" aria-labelledby="descriptions-1-tab">

<p>Tidy descriptions are the same as the raw descriptions for now.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">conf</span><span class="op">$</span><span class="fu">get_tidy_descriptions</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu">glue</span><span class="op">(</span><span class="st">"{toolu} tidy file descriptions."</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>PURPLE tidy file descriptions.</caption>
<colgroup>
<col width="15%">
<col width="84%">
</colgroup>
<thead><tr class="header">
<th align="left">name</th>
<th align="left">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">cnvgenetsv</td>
<td align="left">Copy number alterations of each gene in the HMF gene
panel.</td>
</tr>
<tr class="even">
<td align="left">cnvsomtsv</td>
<td align="left">Copy number profile of all (contiguous) segments of the
tumor sample.</td>
</tr>
<tr class="odd">
<td align="left">drivercatalog</td>
<td align="left">Significant amplifications and deletions that occur in
the HMF gene panel.</td>
</tr>
<tr class="even">
<td align="left">germdeltsv</td>
<td align="left">Germline deletions.</td>
</tr>
<tr class="odd">
<td align="left">purityrange</td>
<td align="left">Best fit per purity sorted by score.</td>
</tr>
<tr class="even">
<td align="left">puritytsv</td>
<td align="left">Purity/ploidy fit summary.</td>
</tr>
<tr class="odd">
<td align="left">qc</td>
<td align="left">QC metrics.</td>
</tr>
<tr class="even">
<td align="left">somclonality</td>
<td align="left">Clonality peak model data.</td>
</tr>
<tr class="odd">
<td align="left">somhist</td>
<td align="left">Somatic variant histogram data.</td>
</tr>
<tr class="even">
<td align="left">version</td>
<td align="left">Version of the tool.</td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" id="schemas-1" role="tabpanel" aria-labelledby="schemas-1-tab">

<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">s</span> <span class="op">&lt;-</span> <span class="va">conf</span><span class="op">$</span><span class="fu">get_tidy_schemas_all</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 4</span></span></span>
<span><span class="co">#&gt;    name          version tbl   schema           </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cnvgenetsv    latest  tbl1  <span style="color: #949494;">&lt;tibble [18 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cnvsomtsv     latest  tbl1  <span style="color: #949494;">&lt;tibble [16 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> drivercatalog latest  tbl1  <span style="color: #949494;">&lt;tibble [17 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> germdeltsv    latest  tbl1  <span style="color: #949494;">&lt;tibble [16 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purityrange   latest  tbl1  <span style="color: #949494;">&lt;tibble [6 × 3]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> puritytsv     latest  tbl1  <span style="color: #949494;">&lt;tibble [25 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> qc            latest  tbl1  <span style="color: #949494;">&lt;tibble [12 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> somclonality  latest  tbl1  <span style="color: #949494;">&lt;tibble [6 × 3]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> somhist       latest  tbl1  <span style="color: #949494;">&lt;tibble [3 × 3]&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> version       latest  tbl1  <span style="color: #949494;">&lt;tibble [2 × 3]&gt;</span></span></span>
<span><span class="va">s</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">name</span> <span class="op">==</span> <span class="st">"puritytsv"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="st">"schema"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="st">"schema"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 3</span></span></span>
<span><span class="co">#&gt;    field                 type  description                                      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purity                d     purity of tumor in the sample                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> norm_factor           d     internal factor to convert tumor ratio to cn.    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> score                 d     score of fit (lower is better)                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> diploid_proportion    d     proportion of cn regions that have 1 (+- 0.2) mi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ploidy                d     average ploidy of the tumor sample after adjusti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gender                c     one of male or female                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> status                c     either pass or one or more warning or fail status</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> polyclonal_proportion d     proportion of copy number regions that are more …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> min_purity            d     minimum purity with score within 10% of best     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> max_purity            d     maximum purity with score within 10% of best     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
<div class="section level2 tabset tabset-pills">
<h2 class="tabset tabset-pills" id="tool">
<code>Tool</code><a class="anchor" aria-label="anchor" href="#tool"></a>
</h2>
<p><code>Tool</code> is the main organisation class for all file parsers
and tidiers. It contains functions for parsing and tidying typical
CSV/TSV files (with column names), and TXT files where the column names
are missing. Currently it utilises the very simple
<code><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">readr::read_delim</a></code> function from the {<a href="https://github.com/tidyverse/readr" title="readr" class="external-link">readr</a>}
package that reads all the data into memory. See <code><a href="../reference/Tool.html">?Tool</a></code>.</p>
<p>These simple parsers are used in 80-90% of cases, so in the future we
can optimise the parsing if needed with faster packages such as {<a href="https://github.com/Rdatatable/data.table" title="data.table" class="external-link">data.table</a>}, {<a href="https://github.com/duckdb/duckdb-r" title="duckdb-r" class="external-link">duckdb-r</a>}
or {<a href="https://github.com/eitsupi/neo-r-polars" title="neo-r-polars" class="external-link">neo-r-polars</a>}.</p>







<ul class="nav nav-pills" id="tool" role="tablist">
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#initialise" id="initialise-tab" type="button" role="tab" aria-controls="initialise" aria-selected="true" class="active nav-link">initialise</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#config-1" id="config-1-tab" type="button" role="tab" aria-controls="config-1" aria-selected="false" class="nav-link">config</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#list" id="list-tab" type="button" role="tab" aria-controls="list" aria-selected="false" class="nav-link">list</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#tidy-1" id="tidy-1-tab" type="button" role="tab" aria-controls="tidy-1" aria-selected="false" class="nav-link">tidy</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#filter" id="filter-tab" type="button" role="tab" aria-controls="filter" aria-selected="false" class="nav-link">filter</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#write" id="write-tab" type="button" role="tab" aria-controls="write" aria-selected="false" class="nav-link">write</button></li>
<li role="presentation" class="nav-item"><button data-bs-toggle="tab" data-bs-target="#nemofy" id="nemofy-tab" type="button" role="tab" aria-controls="nemofy" aria-selected="false" class="nav-link">nemofy</button></li>
</ul>
<div class="tab-content">
<div class="active  tab-pane" id="initialise" role="tabpanel" aria-labelledby="initialise-tab">

<p>We can have different <code>Tool</code> children classes that inherit
(or override) functions and fields from the <code>Tool</code> parent
class. For example, we can create a <code>Tool</code> object for PURPLE
as follows:</p>
<ul>
<li>Initialise a <code>Purple</code> object:</li>
</ul>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ppl_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/purple"</span>, package <span class="op">=</span> <span class="st">"tidywigits"</span><span class="op">)</span></span>
<span><span class="va">ppl</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Purple.html">Purple</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="va">ppl_path</span><span class="op">)</span></span>
<span><span class="co"># each class comes with a print function</span></span>
<span><span class="va">ppl</span></span>
<span><span class="co">#&gt; #--- Tool purple ---#</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |var    |value                                                     |</span></span>
<span><span class="co">#&gt; |:------|:---------------------------------------------------------|</span></span>
<span><span class="co">#&gt; |name   |purple                                                    |</span></span>
<span><span class="co">#&gt; |path   |/home/runner/work/_temp/Library/tidywigits/extdata/purple |</span></span>
<span><span class="co">#&gt; |files  |11                                                        |</span></span>
<span><span class="co">#&gt; |tidied |FALSE                                                     |</span></span></code></pre></div>
</div>
<div class="tab-pane" id="config-1" role="tabpanel" aria-labelledby="config-1-tab">

<ul>
<li>Its <code>Config</code> object is also constructed based on the
<code>name</code> supplied - this is used internally to find files of
interest and infer their schemas:</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ppl</span><span class="op">$</span><span class="va">config</span></span>
<span><span class="co">#&gt; #--- Config purple ---#</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; |var   |value  |</span></span>
<span><span class="co">#&gt; |:-----|:------|</span></span>
<span><span class="co">#&gt; |tool  |purple |</span></span>
<span><span class="co">#&gt; |nraw  |10     |</span></span>
<span><span class="co">#&gt; |ntidy |10     |</span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">config</span><span class="op">$</span><span class="fu">get_raw_patterns</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 2</span></span></span>
<span><span class="co">#&gt;    name          value                                                     </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                                     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cnvgenetsv    <span style="color: #949494;">"</span>\\.purple\\.cnv\\.gene\\.tsv$<span style="color: #949494;">"</span>                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cnvsomtsv     <span style="color: #949494;">"</span>\\.purple\\.cnv\\.somatic\\.tsv$<span style="color: #949494;">"</span>                        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> drivercatalog <span style="color: #949494;">"</span>\\.purple\\.driver\\.catalog\\.(germline|somatic)\\.tsv$<span style="color: #949494;">"</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> germdeltsv    <span style="color: #949494;">"</span>\\.purple\\.germline\\.deletion\\.tsv$<span style="color: #949494;">"</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purityrange   <span style="color: #949494;">"</span>\\.purple\\.purity\\.range\\.tsv$<span style="color: #949494;">"</span>                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> puritytsv     <span style="color: #949494;">"</span>\\.purple\\.purity\\.tsv$<span style="color: #949494;">"</span>                               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> qc            <span style="color: #949494;">"</span>\\.purple\\.qc$<span style="color: #949494;">"</span>                                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> somclonality  <span style="color: #949494;">"</span>\\.purple\\.somatic\\.clonality\\.tsv$<span style="color: #949494;">"</span>                  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> somhist       <span style="color: #949494;">"</span>\\.purple\\.somatic\\.hist\\.tsv$<span style="color: #949494;">"</span>                       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> version       <span style="color: #949494;">"</span>^purple\\.version$<span style="color: #949494;">"</span></span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">config</span><span class="op">$</span><span class="fu">get_raw_schema</span><span class="op">(</span><span class="st">"puritytsv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 2</span></span></span>
<span><span class="co">#&gt;    field                type </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purity               d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> normFactor           d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> score                d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> diploidProportion    d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ploidy               d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gender               c    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> status               c    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> polyclonalProportion d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> minPurity            d    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> maxPurity            d    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">config</span><span class="op">$</span><span class="fu">get_tidy_schema</span><span class="op">(</span><span class="st">"puritytsv"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 25 × 3</span></span></span>
<span><span class="co">#&gt;    field                 type  description                                      </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purity                d     purity of tumor in the sample                    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> norm_factor           d     internal factor to convert tumor ratio to cn.    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> score                 d     score of fit (lower is better)                   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> diploid_proportion    d     proportion of cn regions that have 1 (+- 0.2) mi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ploidy                d     average ploidy of the tumor sample after adjusti…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> gender                c     one of male or female                            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> status                c     either pass or one or more warning or fail status</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> polyclonal_proportion d     proportion of copy number regions that are more …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> min_purity            d     minimum purity with score within 10% of best     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> max_purity            d     maximum purity with score within 10% of best     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 15 more rows</span></span></span></code></pre></div>
</div>
<div class="tab-pane" id="list" role="tabpanel" aria-labelledby="list-tab">

<p>We can list files that can be parsed with
<code>list_files</code>:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">lf</span> <span class="op">&lt;-</span> <span class="va">ppl</span><span class="op">$</span><span class="fu">list_files</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 11</span></span></span>
<span><span class="co">#&gt;    tool_parser    parser bname    size lastmodified        path  pattern FileObj</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purple_cnvgen… cnvge… LXXX…   1.44K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> purple_cnvsom… cnvso… LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> purple_driver… drive… LXXX…     819 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> purple_driver… drive… LXXX…     468 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purple_germde… germd… LXXX…   1.24K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> purple_purity… purit… LXXX…     484 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> purple_purity… purit… LXXX…     462 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> purple_qc      qc     LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> purple_somclo… somcl… LXXX…     451 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> purple_somhist somhi… LXXX…     138 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> purple_version versi… purp…      39 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>^purp… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: prefix &lt;glue&gt;, schema &lt;list&gt;, group &lt;glue&gt;</span></span></span>
<span><span class="va">lf</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [1 × 11] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ tool_parser : 'glue' chr "purple_cnvgenetsv"</span></span>
<span><span class="co">#&gt;  $ parser      : chr "cnvgenetsv"</span></span>
<span><span class="co">#&gt;  $ bname       : chr "LXXXXXXX.purple.cnv.gene.tsv"</span></span>
<span><span class="co">#&gt;  $ size        : 'fs_bytes' num 1.44K</span></span>
<span><span class="co">#&gt;  $ lastmodified: POSIXct[1:1], format: "2025-07-09 16:35:22"</span></span>
<span><span class="co">#&gt;  $ path        : chr "/home/runner/work/_temp/Library/tidywigits/extdata/purple/LXXXXXXX.purple.cnv.gene.tsv"</span></span>
<span><span class="co">#&gt;  $ pattern     : chr "\\.purple\\.cnv\\.gene\\.tsv$"</span></span>
<span><span class="co">#&gt;  $ FileObj     :List of 1</span></span>
<span><span class="co">#&gt;   ..$ :Classes 'File', 'R6' &lt;File&gt;</span></span>
<span><span class="co">#&gt;   Public:</span></span>
<span><span class="co">#&gt;     bname: LXXXXXXX.purple.cnv.gene.tsv</span></span>
<span><span class="co">#&gt;     clone: function (deep = FALSE) </span></span>
<span><span class="co">#&gt;     initialize: function (path = NULL, suffix_pattern = NULL) </span></span>
<span><span class="co">#&gt;     path: /home/runner/work/_temp/Library/tidywigits/extdata/purpl ...</span></span>
<span><span class="co">#&gt;     prefix: LXXXXXXX</span></span>
<span><span class="co">#&gt;     print: function (...) </span></span>
<span><span class="co">#&gt;     size: 1.44K</span></span>
<span><span class="co">#&gt;     suffix_pattern: \.purple\.cnv\.gene\.tsv$ </span></span>
<span><span class="co">#&gt;  $ prefix      : 'glue' chr "LXXXXXXX"</span></span>
<span><span class="co">#&gt;  $ schema      :List of 1</span></span>
<span><span class="co">#&gt;   ..$ : tibble [18 × 2] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;   .. ..$ field: chr [1:18] "chromosome" "start" "end" "gene" ...</span></span>
<span><span class="co">#&gt;   .. ..$ type : chr [1:18] "c" "d" "d" "c" ...</span></span>
<span><span class="co">#&gt;  $ group       : 'glue' chr ""</span></span></code></pre></div>
</div>
<div class="tab-pane" id="tidy-1" role="tabpanel" aria-labelledby="tidy-1-tab">

<p>We can parse and tidy files of interest using the <code>tidy</code>
function. Note that this function is called on the object and not
assigned anywhere:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this will create a new field tbls containing the tidy data (and optionally</span></span>
<span><span class="co"># the 'raw' parsed data)</span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="fu">tidy</span><span class="op">(</span>tidy <span class="op">=</span> <span class="cn">TRUE</span>, keep_raw <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">tbls</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 11</span></span></span>
<span><span class="co">#&gt;    tool_parser     parser bname    size lastmodified        path  pattern prefix</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purple_cnvgene… cnvge… LXXX…   1.44K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> purple_cnvsomt… cnvso… LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> purple_driverc… drive… LXXX…     819 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> purple_driverc… drive… LXXX…     468 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purple_germdel… germd… LXXX…   1.24K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> purple_purityr… purit… LXXX…     484 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> purple_purityt… purit… LXXX…     462 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> purple_qc       qc     LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> purple_somclon… somcl… LXXX…     451 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> purple_somhist  somhi… LXXX…     138 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… LXXXX…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> purple_version  versi… purp…      39 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>^purp… versi…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: group &lt;glue&gt;, raw &lt;list&gt;, tidy &lt;list&gt;</span></span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">tbls</span><span class="op">$</span><span class="va">raw</span><span class="op">[[</span><span class="fl">8</span><span class="op">]</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ QCStatus                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PASS"</span></span>
<span><span class="co">#&gt; $ Method                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NORMAL"</span></span>
<span><span class="co">#&gt; $ CopyNumberSegments            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "354"</span></span>
<span><span class="co">#&gt; $ UnsupportedCopyNumberSegments <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "110"</span></span>
<span><span class="co">#&gt; $ Purity                        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0.8700"</span></span>
<span><span class="co">#&gt; $ AmberGender                   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MALE"</span></span>
<span><span class="co">#&gt; $ CobaltGender                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MALE"</span></span>
<span><span class="co">#&gt; $ DeletedGenes                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0"</span></span>
<span><span class="co">#&gt; $ Contamination                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0.0"</span></span>
<span><span class="co">#&gt; $ GermlineAberrations           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NONE"</span></span>
<span><span class="co">#&gt; $ AmberMeanDepth                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "73"</span></span>
<span><span class="co">#&gt; $ LohPercent                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "0.0321"</span></span>
<span><span class="co"># the tidy tibbles are nested to allow for more than one tidy tibble per file</span></span>
<span><span class="va">ppl</span><span class="op">$</span><span class="va">tbls</span><span class="op">$</span><span class="va">tidy</span><span class="op">[[</span><span class="fl">8</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"data"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1</span></span>
<span><span class="co">#&gt; Columns: 12</span></span>
<span><span class="co">#&gt; $ qc_status               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "PASS"</span></span>
<span><span class="co">#&gt; $ method                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NORMAL"</span></span>
<span><span class="co">#&gt; $ cn_segments             <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 354</span></span>
<span><span class="co">#&gt; $ unsupported_cn_segments <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 110</span></span>
<span><span class="co">#&gt; $ purity                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.87</span></span>
<span><span class="co">#&gt; $ gender_amber            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MALE"</span></span>
<span><span class="co">#&gt; $ gender_cobalt           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "MALE"</span></span>
<span><span class="co">#&gt; $ deleted_genes           <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 0</span></span>
<span><span class="co">#&gt; $ contamination           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0</span></span>
<span><span class="co">#&gt; $ germline_aberrations    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "NONE"</span></span>
<span><span class="co">#&gt; $ mean_depth_amber        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 73</span></span>
<span><span class="co">#&gt; $ loh_percent             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.0321</span></span></code></pre></div>
</div>
<div class="tab-pane" id="filter" role="tabpanel" aria-labelledby="filter-tab">

<p>We can also focus on a subset of files to tidy using the
<code>filter_files</code> function. The <code>include</code> and
<code>exclude</code> arguments can specify which parsers to include or
exclude in the analysis:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create new Purple object</span></span>
<span><span class="va">ppl2</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Purple.html">Purple</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="va">ppl_path</span><span class="op">)</span></span>
<span><span class="va">ppl2</span><span class="op">$</span><span class="va">files</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 11</span></span></span>
<span><span class="co">#&gt;    tool_parser    parser bname    size lastmodified        path  pattern FileObj</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purple_cnvgen… cnvge… LXXX…   1.44K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> purple_cnvsom… cnvso… LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> purple_driver… drive… LXXX…     819 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> purple_driver… drive… LXXX…     468 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purple_germde… germd… LXXX…   1.24K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> purple_purity… purit… LXXX…     484 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> purple_purity… purit… LXXX…     462 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> purple_qc      qc     LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> purple_somclo… somcl… LXXX…     451 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> purple_somhist somhi… LXXX…     138 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> purple_version versi… purp…      39 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>^purp… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: prefix &lt;glue&gt;, schema &lt;list&gt;, group &lt;glue&gt;</span></span></span>
<span><span class="va">ppl2</span><span class="op">$</span><span class="fu">filter_files</span><span class="op">(</span>include <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"purple_qc"</span>, <span class="st">"purple_cnvsomtsv"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">ppl2</span><span class="op">$</span><span class="va">files</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 11</span></span></span>
<span><span class="co">#&gt;   tool_parser     parser bname    size lastmodified        path  pattern FileObj</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> purple_cnvsomt… cnvso… LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> purple_qc       qc     LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: prefix &lt;glue&gt;, schema &lt;list&gt;, group &lt;glue&gt;</span></span></span></code></pre></div>
</div>
<div class="tab-pane" id="write" role="tabpanel" aria-labelledby="write-tab">

<p>After tidying the data of interest, we can write the tidy tibbles to
various formats, like Apache Parquet, PostgreSQL, CSV/TSV and R’s RDS.
Below we can see that the <code>id</code> specified is added to the
written files in an additional <code>nemo_id</code> column. This can be
used e.g. to distinguish results from different runs in a data pipeline.
When writing to a database like PostgreSQL, another column
<code>nemo_pfix</code> is used to distinguish results from the same run
from the same tool.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ppl2</span><span class="op">$</span><span class="fu">tidy</span><span class="op">(</span><span class="op">)</span> <span class="co"># first need to tidy</span></span>
<span><span class="va">outdir1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">fmt</span> <span class="op">&lt;-</span> <span class="st">"tsv"</span></span>
<span><span class="va">ppl2</span><span class="op">$</span><span class="fu">write</span><span class="op">(</span>odir <span class="op">=</span> <span class="va">outdir1</span>, format <span class="op">=</span> <span class="va">fmt</span>, id <span class="op">=</span> <span class="st">"run123"</span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">wfiles</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_info</a></span><span class="op">(</span><span class="va">outdir1</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 19 × 5</span></span></span>
<span><span class="co">#&gt;    path                            type     size permissions modification_time  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fs::path&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::perms&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXX_purple_cnvsomtsv.tsv.gz</span> file      631 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> …<span style="color: #BB0000; font-weight: bold;">P3iY/LXXXXXXX_purple_qc.tsv.gz</span> file      186 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> …mp/RtmpKyP3iY/file25391040c134 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> …mp/RtmpKyP3iY/file253915406ba9 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> …mp/RtmpKyP3iY/file25391aa797be file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:14</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> …mp/RtmpKyP3iY/file253921044885 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> …mp/RtmpKyP3iY/file253927a8ffce file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:14</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> /tmp/RtmpKyP3iY/file25392fc76e1 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> …mp/RtmpKyP3iY/file253936a31062 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> …mp/RtmpKyP3iY/file253939366458 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:12</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> …mp/RtmpKyP3iY/file253940de36df file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> /tmp/RtmpKyP3iY/file2539497a005 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">13</span> …mp/RtmpKyP3iY/file25394f970f66 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:12</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">14</span> …mp/RtmpKyP3iY/file253951726bb5 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:13</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">15</span> …mp/RtmpKyP3iY/file25396b247b68 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">16</span> …mp/RtmpKyP3iY/file25396d668318 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:12</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">17</span> …mp/RtmpKyP3iY/file2539728a121a file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:14</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">18</span> …mp/RtmpKyP3iY/file25397d946d84 file    4.71K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:12</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">19</span> …rmarkdown-str253974da9e39.html file    1.13K rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:12</span></span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_tsv</a></span><span class="op">(</span><span class="va">wfiles</span><span class="op">$</span><span class="va">path</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, show_col_types <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 13</span></span></span>
<span><span class="co">#&gt;   nemo_id qc_status method cn_segments unsupported_cn_segments purity</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> run123  PASS      NORMAL         354                     110   0.87</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 7 more variables: gender_amber &lt;chr&gt;, gender_cobalt &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   deleted_genes &lt;dbl&gt;, contamination &lt;dbl&gt;, germline_aberrations &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   mean_depth_amber &lt;dbl&gt;, loh_percent &lt;dbl&gt;</span></span></span></code></pre></div>
</div>
<div class="tab-pane" id="nemofy" role="tabpanel" aria-labelledby="nemofy-tab">

<p>The <code>nemofy</code> function is a convenient wrapper for the
process of filtering, tidying, and writing.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ppl3</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Purple.html">Purple</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>path <span class="op">=</span> <span class="va">ppl_path</span><span class="op">)</span></span>
<span><span class="va">outdir2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"ppl3"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ppl3</span><span class="op">$</span><span class="va">files</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 11</span></span></span>
<span><span class="co">#&gt;    tool_parser    parser bname    size lastmodified        path  pattern FileObj</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> purple_cnvgen… cnvge… LXXX…   1.44K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> purple_cnvsom… cnvso… LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> purple_driver… drive… LXXX…     819 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> purple_driver… drive… LXXX…     468 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> purple_germde… germd… LXXX…   1.24K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> purple_purity… purit… LXXX…     484 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> purple_purity… purit… LXXX…     462 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> purple_qc      qc     LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> purple_somclo… somcl… LXXX…     451 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> purple_somhist somhi… LXXX…     138 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> purple_version versi… purp…      39 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>^purp… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: prefix &lt;glue&gt;, schema &lt;list&gt;, group &lt;glue&gt;</span></span></span>
<span><span class="va">ppl3</span><span class="op">$</span><span class="fu">nemofy</span><span class="op">(</span></span>
<span>  odir <span class="op">=</span> <span class="va">outdir2</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"tsv"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"run_ppl3"</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"purple_cnvgenetsv"</span>, <span class="st">"purple_cnvsomtsv"</span>, <span class="st">"purple_drivercatalog"</span>, <span class="st">"purple_germdeltsv"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">wfiles2</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_info</a></span><span class="op">(</span><span class="va">outdir2</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 5</span></span></span>
<span><span class="co">#&gt;   path                               type   size permissions modification_time  </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;fs::path&gt;</span>                         <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs:&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::perms&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXXX_purple_purityrange.tsv.gz</span> file    204 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> …<span style="color: #BB0000; font-weight: bold;">/LXXXXXXX_purple_puritytsv.tsv.gz</span> file    303 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> …<span style="color: #BB0000; font-weight: bold;">iY/ppl3/LXXXXXXX_purple_qc.tsv.gz</span> file    186 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXX_purple_somclonality.tsv.gz</span> file    154 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> …<span style="color: #BB0000; font-weight: bold;">l3/LXXXXXXX_purple_somhist.tsv.gz</span> file    108 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> …<span style="color: #BB0000; font-weight: bold;">pl3/version_purple_version.tsv.gz</span> file     77 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:15</span></span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_tsv</a></span><span class="op">(</span><span class="va">wfiles2</span><span class="op">$</span><span class="va">path</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, show_col_types <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 26</span></span></span>
<span><span class="co">#&gt;   nemo_id  purity norm_factor score diploid_proportion ploidy gender status</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> run_ppl3   0.87       0.528 0.841             0.003<span style="text-decoration: underline;">6</span>   4.05 MALE   NORMAL</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 18 more variables: polyclonal_proportion &lt;dbl&gt;, min_purity &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   max_purity &lt;dbl&gt;, min_ploidy &lt;dbl&gt;, max_ploidy &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   min_diploid_proportion &lt;dbl&gt;, max_diploid_proportion &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   somatic_penalty &lt;dbl&gt;, whole_genome_duplication &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ms_indels_per_mb &lt;dbl&gt;, ms_status &lt;chr&gt;, tml &lt;dbl&gt;, tml_status &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tmb_per_mb &lt;dbl&gt;, tmb_status &lt;chr&gt;, sv_tumor_mutational_burden &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   run_mode &lt;chr&gt;, targeted &lt;lgl&gt;</span></span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level2">
<h2 id="workflow">
<code>Workflow</code><a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<p>A <code>Workflow</code> consists of a list of one or more
<code>Tool</code>s. We can construct a certain <code>Workflow</code>
with different <code>Tool</code>s, which would allow parsing and writing
tidy tables from a variety of bioinformatic tools. See
<code><a href="../reference/Workflow.html">?Workflow</a></code>.</p>
<p>The <a href="https://github.com/nf-core/oncoanalyser" title="Oncoanalyser" class="external-link">Oncoanalyser</a> Nextflow pipeline uses several
tools from <a href="https://github.com/hartwigmedical/hmftools" title="WiGiTS suite" class="external-link">WiGiTS</a>, and we can construct a
<code>Oncoanalyser</code> class as a <code>Workflow</code> child based
on a suite of <code>Tool</code>s under the <a href="https://github.com/umccr/tidywigits" title="tidywigits" class="external-link">tidywigits</a> R package. Similarly to
<code>Tool</code>, a <code>Workflow</code> object contains functions
such as <code>filter_files</code>, <code>list_files</code>,
<code>tidy</code>, <code>write</code> and <code>nemofy</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">oa</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/purple"</span>, package <span class="op">=</span> <span class="st">"tidywigits"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="va"><a href="../reference/Oncoanalyser.html">Oncoanalyser</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">outdir3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"oa"</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">oa</span><span class="op">$</span><span class="fu">list_files</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 11</span></span></span>
<span><span class="co">#&gt;    parser    bname    size lastmodified        path  pattern tool_parser FileObj</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::b&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;glue&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;list&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> cnvgenet… LXXX…   1.44K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_cnv… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cnvsomtsv LXXX…   1.32K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_cnv… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> driverca… LXXX…     819 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_dri… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> driverca… LXXX…     468 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_dri… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> germdelt… LXXX…   1.24K 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_ger… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> purityra… LXXX…     484 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_pur… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> puritytsv LXXX…     462 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_pur… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> qc        LXXX…     228 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_qc   <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> somclona… LXXX…     451 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_som… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> somhist   LXXX…     138 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>\\.pu… purple_som… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> version   purp…      39 2025-07-09 <span style="color: #949494;">16:35:22</span> /hom… <span style="color: #949494;">"</span>^purp… purple_ver… <span style="color: #949494;">&lt;File&gt;</span> </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: prefix &lt;glue&gt;, schema &lt;list&gt;, group &lt;glue&gt;</span></span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">oa</span><span class="op">$</span><span class="fu">nemofy</span><span class="op">(</span></span>
<span>  odir <span class="op">=</span> <span class="va">outdir3</span>,</span>
<span>  format <span class="op">=</span> <span class="st">"tsv"</span>,</span>
<span>  id <span class="op">=</span> <span class="st">"oa_run1"</span>,</span>
<span>  exclude <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cobalt_ratiotsv"</span>, <span class="st">"amber_baftsv"</span>, <span class="st">"isofox_altsj"</span>, <span class="st">"isofox_transdata"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="op">(</span><span class="va">wfiles3</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_ls.html" class="external-link">dir_info</a></span><span class="op">(</span><span class="va">outdir3</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 5</span></span></span>
<span><span class="co">#&gt;    path                              type   size permissions modification_time  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fs::path&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs:&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fs::perms&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> …<span style="color: #BB0000; font-weight: bold;">line_purple_drivercatalog.tsv.gz</span> file    363 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXXX_purple_cnvgenetsv.tsv.gz</span> file    444 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> …<span style="color: #BB0000; font-weight: bold;">LXXXXXXX_purple_cnvsomtsv.tsv.gz</span> file    633 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> …<span style="color: #BB0000; font-weight: bold;">XXXX_purple_drivercatalog.tsv.gz</span> file    293 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXXX_purple_germdeltsv.tsv.gz</span> file    479 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> …<span style="color: #BB0000; font-weight: bold;">XXXXXX_purple_purityrange.tsv.gz</span> file    202 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> …<span style="color: #BB0000; font-weight: bold;">LXXXXXXX_purple_puritytsv.tsv.gz</span> file    303 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> …<span style="color: #BB0000; font-weight: bold;">3iY/oa/LXXXXXXX_purple_qc.tsv.gz</span> file    185 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> …<span style="color: #BB0000; font-weight: bold;">XXXXX_purple_somclonality.tsv.gz</span> file    153 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> …<span style="color: #BB0000; font-weight: bold;">a/LXXXXXXX_purple_somhist.tsv.gz</span> file    107 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> …<span style="color: #BB0000; font-weight: bold;">oa/version_purple_version.tsv.gz</span> file     76 rw-r--r--   2025-07-09 <span style="color: #949494;">16:36:17</span></span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_tsv</a></span><span class="op">(</span><span class="va">wfiles3</span><span class="op">$</span><span class="va">path</span><span class="op">[</span><span class="fl">5</span><span class="op">]</span>, show_col_types <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 17</span></span></span>
<span><span class="co">#&gt;    nemo_id gene        chromosome chromosome_band region_start region_end</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> oa_run1 ZYG11B      chr1       p32.3               52<span style="text-decoration: underline;">797</span>001   52<span style="text-decoration: underline;">798</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> oa_run1 RPL31P12    chr1       p31.1               72<span style="text-decoration: underline;">300</span>641   72<span style="text-decoration: underline;">346</span>158</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> oa_run1 AKNAD1      chr1       p13.3              108<span style="text-decoration: underline;">824</span>397  108<span style="text-decoration: underline;">829</span>338</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> oa_run1 SLC16A1-AS1 chr1       p13.2              113<span style="text-decoration: underline;">006</span>001  113<span style="text-decoration: underline;">012</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> oa_run1 LRIG2-DT    chr1       p13.2              113<span style="text-decoration: underline;">006</span>001  113<span style="text-decoration: underline;">012</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> oa_run1 GABPB2      chr1       q21.3              151<span style="text-decoration: underline;">073</span>001  151<span style="text-decoration: underline;">117</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> oa_run1 RPS29P29    chr1       q21.3              151<span style="text-decoration: underline;">073</span>001  151<span style="text-decoration: underline;">117</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> oa_run1 LCE1E       chr1       q21.3              152<span style="text-decoration: underline;">787</span>001  152<span style="text-decoration: underline;">798</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> oa_run1 LCE1D       chr1       q21.3              152<span style="text-decoration: underline;">787</span>001  152<span style="text-decoration: underline;">798</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> oa_run1 PTPRVP      chr1       q32.1              202<span style="text-decoration: underline;">171</span>001  202<span style="text-decoration: underline;">173</span>000</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more variables: depth_window_count &lt;dbl&gt;, exon_start &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   exon_end &lt;dbl&gt;, detection_method &lt;chr&gt;, germline_status &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   tumor_status &lt;chr&gt;, germline_cn &lt;dbl&gt;, tumor_cn &lt;dbl&gt;, filter &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   cohort_frequency &lt;dbl&gt;, reported &lt;lgl&gt;</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/pdiakumis" class="external-link">Peter Diakumis</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
