---
format: gfm
knitr:
  opts_chunk:
    collapse: true
    comment: ''
---

<!-- README.md is generated from README.qmd. Please edit that file -->

```{r}
#| label: pkg_load
#| echo: false
#| message: false
use("tidywigits")
```

```{r}
#| label: opts
#| echo: false
options(width = 100)
```

# üß¨‚ú® tidywigits: Tidy WiGiTS Outputs


[![1] ![2] ![3]](https://github.com/umccr/tidywigits/pkgs/container/tidywigits)
[![4] ![5]](https://anaconda.org/umccr/r-tidywigits)

[1]: <https://ghcr-badge.egpl.dev/umccr/tidywigits/tags>
[2]: <https://ghcr-badge.egpl.dev/umccr/tidywigits/latest_tag>
[3]: <https://ghcr-badge.egpl.dev/umccr/tidywigits/size?tag=0.0.3>
[4]: <https://anaconda.org/umccr/r-tidywigits/badges/version.svg>
[5]: <https://anaconda.org/umccr/r-tidywigits/badges/latest_release_date.svg>

- üìö Docs: https://umccr.github.io/tidywigits/:
  - files/tables supported: <https://umccr.github.io/tidywigits/schemas>
  - installation: <https://umccr.github.io/tidywigits/installation>
  - R6 structure: <https://umccr.github.io/tidywigits/structure>
  - developer notes: <https://umccr.github.io/tidywigits/developers>

## Overview

{{< include /inst/doc-templates/introduction/_overview.qmd >}}

## üé® Quick Start

The starting point of {tidywigits} is a directory with WiGiTS results. Let's
look at some sample data under <https://github.com/umccr/tidywigits/tree/main/inst/extdata/oa>:

```{r}
#| label: example_input_tree
#| code-fold: true
#| code-summary: "Click here"
system.file("extdata/oa", package = "tidywigits") |>
  fs::dir_tree(invert = TRUE, glob = "*.dvc")
```

We can parse, tidy up, and write the WiGiTS results into e.g. Parquet format or
a PostgreSQL database as follows:

- Parquet:

{{< include /inst/doc-templates/examples/_parquet1.qmd >}}

- PostgreSQL:

{{< include /inst/doc-templates/examples/_postgresql1.qmd >}}

**IMPORTANT**: support for VCFs is under active development.

## üçï Installation

{{< include /inst/doc-templates/installation/_r.qmd >}}

Alternatively:

- conda package: <https://anaconda.org/umccr/r-tidywigits>
- Docker image: <https://github.com/umccr/tidywigits/pkgs/container/tidywigits>

For more details see: <https://umccr.github.io/tidywigits/installation/>

## üåÄ CLI

A `tidywigits.R` command line interface is available for convenience.

- If you're using the conda package, the `tidywigits.R` command will already be
  available inside the activated conda environment.
- If you're _not_ using the conda package, you need to export the
  `tidywigits/inst/cli/` directory to your `PATH` in order to use `tidywigits.R`.

```{bash}
#| label: cli1
#| echo: true
#| eval: false
tw_cli=$(Rscript -e 'x = system.file("cli", package = "tidywigits"); cat(x, "\n")' | xargs)
export PATH="${tw_cli}:${PATH}"
```

```{bash}
#| label: cli2
#| echo: false
tw_cli=$(Rscript -e 'x = system.file("cli", package = "tidywigits"); cat(x, "\n")' | xargs)
export PATH="${tw_cli}:${PATH}"

echo "tidywigits.R --version" & tidywigits.R --version
echo ""
echo "#-----------------------------------#"
echo "tidywigits.R --help" & tidywigits.R --help
echo ""
echo "#-----------------------------------#"
echo "#------- Tidy ----------------------#"
echo "tidywigits.R tidy --help" & tidywigits.R tidy --help
echo ""
echo "#-----------------------------------#"
echo "#------- List ----------------------#"
echo "tidywigits.R list --help" & tidywigits.R list --help
echo ""
```
